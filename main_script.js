//Favicons
function updateFaviconsForLinks(e){e.forEach((e=>{if(!(e.closest(".spoiler .code_top a")||e.closest(".fancyborder a")||e.closest(".quote_top a")||e.querySelector("img"))){let o=document.createElement("img");o.alt="fav",o.width=16,o.height=16,e.href.includes("youtu.be")?o.src="https://www.google.com/s2/favicons?domain=youtube.com":o.src="https://www.google.com/s2/favicons?domain="+e.href,e.prepend(o)}}))}function handleMutations(e,o){e.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE)if(e.matches(".color a, span.tmsg a"))updateFaviconsForLinks([e]);else{updateFaviconsForLinks(e.querySelectorAll(".color a, span.tmsg a"))}}))}))}const fav=new MutationObserver(handleMutations),body=document.querySelector("body");fav.observe(body,{childList:!0,subtree:!0});const existingLinks=document.querySelectorAll(".color a, span.tmsg a");updateFaviconsForLinks(existingLinks);
//Textarea Autogrow
function waitForElementToAppear(e,t){const a=document.querySelector(e);a?t(a):setTimeout((()=>waitForElementToAppear(e,t)),100)}waitForElementToAppear("textarea#Post",(e=>{!function resizeTextarea(){function updateTextareaHeight(){t.style.height="0",t.style.height=t.scrollHeight+"px",t.style.maxHeight="655px"}const t=e;t&&(updateTextareaHeight(),t.addEventListener("input",updateTextareaHeight),window.addEventListener("load",updateTextareaHeight),t.addEventListener("paste",(()=>setTimeout(updateTextareaHeight,0))))}()}));