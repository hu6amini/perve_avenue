(function(){const lazyLoadImage=(img)=>{if(img.closest("#pa_slideshow")||img.getAttribute("data-src"))return;const setDimensions=(width,height)=>{if(!img.getAttribute("width"))img.setAttribute("width",width);if(!img.getAttribute("height"))img.setAttribute("height",height);return{width,height}};const getDimensions=()=>{if(img.offsetWidth&&img.offsetHeight)return setDimensions(img.offsetWidth,img.offsetHeight);else if(img.naturalWidth&&img.naturalHeight)return setDimensions(img.naturalWidth,img.naturalHeight);else{const tempImg=new Image();tempImg.src=img.src;return new Promise(resolve=>{tempImg.onload=()=>{const dimensions=setDimensions(tempImg.width,tempImg.height);resolve(dimensions)}})}};const updateContainer=(img,dimensions)=>{const container=img.closest(".lz-container");if(container){container.style.width=dimensions.width+"px";container.style.height=dimensions.height+"px"}};const processImage=async()=>{const dimensions=await getDimensions();img.setAttribute("data-src",img.src);img.removeAttribute("src");img.setAttribute("decoding","async");img.setAttribute("data-sizes","auto");img.classList.add("lazyload");if(img.closest(".color")){requestAnimationFrame(()=>{const container=document.createElement("div");container.classList.add("lz-container");img.parentNode.insertBefore(container,img);container.appendChild(img);container.style.width=dimensions.width+"px";container.style.height=dimensions.height+"px"})}updateContainer(img,dimensions)};processImage()};const observer=new MutationObserver((mutationsList)=>{const imageNodes=[];mutationsList.forEach((mutation)=>{mutation.addedNodes.forEach((node)=>{if(node.nodeType===Node.ELEMENT_NODE&&node.tagName==="IMG")imageNodes.push(node)})});imageNodes.forEach((img)=>{lazyLoadImage(img)})});observer.observe(document.documentElement,{childList:true,subtree:true});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("img:not(.lazyload)").forEach((img)=>{lazyLoadImage(img)})})})();
