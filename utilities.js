//Quote - non blocking 
(()=>{function e(e){return e.closest(".ve-content.color")!==null}function t(e,t){let n;return function(...i){clearTimeout(n),n=setTimeout(()=>e.apply(this,i),t)}}function n(e){if(!e.closest(".ve-content.color")){const t=()=>{const n=e.querySelector(".quotebtn button");if(!n&&e.scrollHeight>170){e.style.maxHeight="170px",e.style.overflow="hidden";const i=document.createElement("div");i.className="quotebtn";const o=document.createElement("button");o.textContent="Show More...",i.appendChild(o),e.appendChild(i),o.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),e.style.transition="max-height 0.382s ease-in-out",e.style.maxHeight=e.scrollHeight+"px",i.style.display="none",setTimeout(()=>{e.style.maxHeight="none"},382)})}else n&&e.scrollHeight<=170&&(n.parentNode.remove(),e.style.maxHeight="none")};t(),r.observe(e);const n=e.querySelector(".spoiler .code_top a");n&&n.addEventListener("click",()=>{e.style.maxHeight="none",r.unobserve(e)})}}const r=new ResizeObserver(t(e=>{e.forEach(e=>n(e.target))},100)),o=document.querySelectorAll(".post .quote, #loading .quote");for(let e=0;e<o.length;e++)n(o[e]);const i=new MutationObserver(e=>{for(const t of e)for(const n of t.addedNodes)n.nodeType===Node.ELEMENT_NODE&&(n.matches(".quote")?n(n):n.querySelectorAll(".quote").forEach(e=>n(e)))});i.observe(document.body,{childList:!0,subtree:!0});function a(e){if(!e.closest(".ve-content.color")){const t=e.textContent,n=e.querySelector("a");if(t.includes("@")){const i=t.replace(/(.*)\s*\(([^@]+)@[^)]+\)\s*/,"$2 said:");e.innerHTML=i,e.style.color="var(--mdcol)",n&&(e.appendChild(n),n.style.color="var(--mdcol)")}else{const t=e.querySelector(".quote_top b");t&&(t.style.opacity=1)}}}const c=document.querySelectorAll(".post .quote_top, #loading .quote_top");for(let e=0;e<c.length;e++)a(c[e]);const l=new MutationObserver(e=>{for(const t of e)for(const n of t.addedNodes)n.nodeType===Node.ELEMENT_NODE&&n.querySelectorAll(".quote_top").forEach(e=>a(e))});l.observe(document.body,{childList:!0,subtree:!0});})();
//Skin
(()=>{const e=document.documentElement,t=document.getElementById("theme-toggle-button");t.addEventListener("click",(()=>{"second"===e.getAttribute("data-theme")?(e.removeAttribute("data-theme"),localStorage.removeItem(storageKey)):(e.setAttribute("data-theme","second"),localStorage.setItem(storageKey,"second"))}))})();
