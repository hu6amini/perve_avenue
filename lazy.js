(function(){if(document.readyState==="loading"){document.documentElement.style.visibility="hidden"}const t=new Map;const e=t=>t.closest(".slick_carousel, #st-visual-editor, .send")||t.hasAttribute("data-src")||t.classList.contains("lazyload")||t.getAttribute("loading")==="lazy"||t.src.startsWith("data:")||t.complete;const i=e=>new Promise((i=>{if(t.has(e)){i(t.get(e));return}const o=new Image;o.onload=()=>{const s={width:o.naturalWidth,height:o.naturalHeight};t.set(e,s);i(s)};o.onerror=()=>{const o={width:16,height:9};t.set(e,o);i(o)};o.src=e}));const o=async o=>{if(!o.src||e(o))return;const s=o.src;let n=o.getAttribute("width");let a=o.getAttribute("height");if(!n||!a){if(t.has(s)){const e=t.get(s);n=e.width;a=e.height}else if(o.naturalWidth&&o.naturalHeight){n=o.naturalWidth;a=o.naturalHeight}else{const t=await i(s);n=t.width;a=t.height}}o.setAttribute("data-src",s);o.removeAttribute("src");o.setAttribute("decoding","async");o.classList.add("lazyload");if(n&&a){o.setAttribute("width",n);o.setAttribute("height",a);o.style.aspectRatio=n+" / "+a}if(!("aspectRatio"in document.documentElement.style)){o.style.maxWidth="100%";o.style.height="auto"}};const s=async()=>{const t=document.querySelectorAll("img:not([data-src]):not(.lazyload)");for(const e of t){await o(e)}if(document.documentElement.style.visibility==="hidden"){document.documentElement.style.visibility="visible"}};if(document.readyState!=="loading"){s()}else{document.addEventListener("DOMContentLoaded",s,{once:true})}const n=new MutationObserver((t=>{for(const e of t){for(const t of e.addedNodes){if(t.nodeType===1){if(t.tagName==="IMG"){o(t)}else if(t.querySelectorAll){const e=t.querySelectorAll("img:not([data-src]):not(.lazyload)");e.forEach(o)}}}}}));n.observe(document.body,{childList:true,subtree:true});const a=c(s,100);["ajaxComplete","ajaxSuccess","load","pageshow"].forEach((t=>{window.addEventListener(t,a)}));function c(t,e){let i;return function(){clearTimeout(i);i=setTimeout(t,e)}}})();
