(function(){const t=new Map;let e=0;let s=false;let o=false;const n=t=>t.closest(".slick_carousel")||t.closest("#st-visual-editor")||t.closest(".send")||t.hasAttribute("data-src")||t.classList.contains("lazyload")||t.getAttribute("decoding")==="async"||t.src.startsWith("data:");const r=e=>{if(n(e))return;const s=e.src;if(!s)return;if(t.has(s)){const{width:o,height:n}=t.get(s);a(e,s,o,n);l()}else{const o=new Image;o.onload=()=>{const n=o.naturalWidth;const r=o.naturalHeight;t.set(s,{width:n,height:r});a(e,s,n,r);l()};o.onerror=()=>{a(e,s);l()};o.src=s}};const a=(t,e,s=null,o=null)=>{t.setAttribute("data-src",e);t.removeAttribute("src");t.setAttribute("decoding","async");t.classList.add("lazyload");if(s&&o){t.setAttribute("width",s);t.setAttribute("height",o)}};const c=()=>{if(Date.now()-e<500)return;e=Date.now();const t=Array.from(document.querySelectorAll("img")).filter((t=>!n(t)));if(t.length===0){s=true;i();return}s=false;t.forEach(r)};const d=new MutationObserver((t=>{for(const{addedNodes:e}of t){for(const t of e){if(t.nodeType!==1)continue;if(t.tagName==="IMG"){r(t)}else{t.querySelectorAll?.("img").forEach(r)}}}}));d.observe(document.documentElement||document.body,{childList:true,subtree:true});if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",c)}else{c()}["ajaxComplete","ajaxSuccess","DOMContentLoaded","load","pageshow","readystatechange"].forEach((t=>{document.addEventListener(t,c,{passive:true,capture:true});window.addEventListener(t,c,{passive:true,capture:true})}));setInterval(c,2e3);const i=()=>{if(s&&!o){o=true;document.body.classList.add("lz")}};const l=()=>{if([...document.querySelectorAll("img")].every(n)){s=true;i()}}})();
