(function(){const e=new Map;let t=0;let s=false;let n=false;const o=e=>e.closest(".slick_carousel")||e.closest("#st-visual-editor")||e.closest(".send")||e.hasAttribute("data-src")||e.classList.contains("lazyload")||e.getAttribute("decoding")==="async"||e.src.startsWith("data:");const r=t=>{if(o(t))return;const s=t.src;if(!s)return;if(e.has(s)){const{width:n,height:o}=e.get(s);a(t,s,n,o);l()}else{const n=new Image;n.onload=()=>{const o=n.naturalWidth;const r=n.naturalHeight;e.set(s,{width:o,height:r});a(t,s,o,r);l()};n.onerror=()=>{a(t,s);l()};n.src=s}};const a=(e,t,s=null,n=null)=>{e.setAttribute("data-src",t);e.removeAttribute("src");e.setAttribute("decoding","async");e.classList.add("lazyload");if(s&&n){e.setAttribute("width",s);e.setAttribute("height",n)}};const i=()=>{if(Date.now()-t<500)return;t=Date.now();const e=Array.from(document.querySelectorAll("img")).filter((e=>!o(e)));if(e.length===0){s=true;d();return}s=false;e.forEach(r)};const c=new MutationObserver((e=>{for(const{addedNodes:t}of e){for(const e of t){if(e.nodeType!==1)continue;if(e.tagName==="IMG"){r(e)}else{e.querySelectorAll?.("img").forEach(r)}}}}));c.observe(document.documentElement||document.body,{childList:true,subtree:true});if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",i)}else{i()}["ajaxComplete","ajaxSuccess","DOMContentLoaded","load","pageshow","readystatechange"].forEach((e=>{document.addEventListener(e,i,{passive:true,capture:true});window.addEventListener(e,i,{passive:true,capture:true})}));setInterval(i,2e3);const d=()=>{if(s&&!n){n=true;requestAnimationFrame((()=>{const e=document.querySelector(".container");if(e){e.style.visibility="visible"}}))}};const l=()=>{if([...document.querySelectorAll("img")].every(o)){s=true;d()}}})();
