(function(){const t=new Map;let e=0;let s=new Set;let n=false;const o=t=>t.closest(".slick_carousel")||t.closest("#st-visual-editor")||t.closest(".send")||t.hasAttribute("data-src")||t.classList.contains("lazyload")||t.getAttribute("decoding")==="async"||t.src.startsWith("data:");const a=e=>{if(o(e))return;const n=e.src;if(!n)return;if(!s.has(e))s.add(e);if(t.has(n)){const{width:s,height:o}=t.get(n);i(e,n,s,o);r(e)}else{const s=new Image;s.onload=()=>{const o=s.naturalWidth;const a=s.naturalHeight;t.set(n,{width:o,height:a});i(e,n,o,a);r(e)};s.onerror=()=>{i(e,n);r(e)};s.src=n}};const i=(t,e,s=null,n=null)=>{t.setAttribute("data-src",e);t.removeAttribute("src");t.setAttribute("decoding","async");t.classList.add("lazyload");if(s&&n){t.setAttribute("width",s);t.setAttribute("height",n)}};const r=t=>{s.delete(t);if(s.size===0){l()}};const c=()=>{if(Date.now()-e<500)return;e=Date.now();const t=document.querySelectorAll("img");t.forEach(a)};const d=new MutationObserver((t=>{for(const{addedNodes:e}of t){for(const t of e){if(t.nodeType!==1)continue;if(t.tagName==="IMG"){a(t)}else{t.querySelectorAll?.("img").forEach(a)}}}}));d.observe(document.documentElement||document.body,{childList:true,subtree:true});if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",c)}else{c()}["ajaxComplete","ajaxSuccess","DOMContentLoaded","load","pageshow","readystatechange"].forEach((t=>{document.addEventListener(t,c,{passive:true,capture:true});window.addEventListener(t,c,{passive:true,capture:true})}));setInterval(c,2e3);const l=()=>{if(s.size===0&&!n){n=true;requestAnimationFrame((()=>{document.body.style.visibility="visible"}))}}})();
