(function(){document.documentElement.style.visibility='hidden';const c=new Map;let u=0;const f=function(a){return a.closest(".slick_carousel")||a.closest("#st-visual-editor")||a.closest(".send")||a.hasAttribute("data-src")||a.classList.contains("lazyload")||a.getAttribute("decoding")==="async"||a.src.indexOf("data:")===0},h=function(a,b){var d=a||1,e=b||1,g="<svg xmlns='http://www.w3.org/2000/svg' width='"+d+"' height='"+e+"' viewBox='0 0 "+d+" "+e+"'></svg>";return"data:image/svg+xml;base64,"+btoa(g)},k=async function(a){if(f(a))return;const b=a.src;if(!b||b.indexOf('data:')===0)return;if(c.has(b)){const d=c.get(b);m(a,b,d.width,d.height);return}u++;try{const d=await l(b);c.set(b,d);m(a,b,d.width,d.height)}catch{m(a,b)}u--;u===0&&(document.documentElement.style.visibility='visible')},l=function(a){return new Promise(function(b,d){const e=new Image,g=setTimeout(function(){d(new Error("Timeout loading image"))},3e3);e.onload=function(){clearTimeout(g);b({width:e.naturalWidth,height:e.naturalHeight})};e.onerror=function(){clearTimeout(g);d(new Error("Error loading image"))};e.src=a})},m=function(a,b,d,e){a.src=h(d,e);a.setAttribute('data-src',b);a.classList.add('lazyload');a.setAttribute('decoding','async');if(d&&e){a.setAttribute('width',d);a.setAttribute('height',e)}},n=async function(){const a=document.querySelectorAll('img:not([data-src]):not(.lazyload)');if(a.length===0){document.documentElement.style.visibility='visible';return}await Promise.all(Array.from(a).map(function(b){return k(b)}));u===0&&(document.documentElement.style.visibility='visible')},p=new MutationObserver(function(a){a.forEach(function(b){Array.from(b.addedNodes).forEach(function(d){if(d.nodeType===1){if(d.tagName==='IMG'){k(d)}else if(d.querySelectorAll){var e=d.querySelectorAll('img:not([data-src]):not(.lazyload)');Array.from(e).forEach(function(g){k(g)})}}})})});document.readyState==='loading'?document.addEventListener('DOMContentLoaded',n):n();p.observe(document.documentElement,{childList:!0,subtree:!0});['ajaxComplete','ajaxSuccess','load','pageshow'].forEach(function(a){window.addEventListener(a,n,{passive:!0})})})();
