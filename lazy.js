(function(){const t=new Map;let e=0;let s=false;let n=false;document.body.style.visibility="hidden";const o=t=>t.closest(".slick_carousel")||t.closest("#st-visual-editor")||t.closest(".send")||t.hasAttribute("data-src")||t.classList.contains("lazyload")||t.getAttribute("decoding")==="async"||t.src.startsWith("data:");const r=e=>{if(o(e))return;const s=e.src;if(!s)return;if(t.has(s)){const{width:n,height:o}=t.get(s);a(e,s,n,o);l()}else{const n=new Image;n.onload=()=>{const o=n.naturalWidth;const r=n.naturalHeight;t.set(s,{width:o,height:r});a(e,s,o,r);l()};n.onerror=()=>{a(e,s);l()};n.src=s}};const a=(t,e,s=null,n=null)=>{t.setAttribute("data-src",e);t.removeAttribute("src");t.setAttribute("decoding","async");t.classList.add("lazyload");if(s&&n){t.setAttribute("width",s);t.setAttribute("height",n)}};const i=()=>{if(Date.now()-e<500)return;e=Date.now();const t=Array.from(document.querySelectorAll("img")).filter((t=>!o(t)));if(t.length===0){s=true;d();return}s=false;t.forEach(r)};const c=new MutationObserver((t=>{for(const{addedNodes:e}of t){for(const t of e){if(t.nodeType!==1)continue;if(t.tagName==="IMG"){r(t)}else{t.querySelectorAll?.("img").forEach(r)}}}}));c.observe(document.documentElement||document.body,{childList:true,subtree:true});if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",i)}else{i()}["ajaxComplete","ajaxSuccess","DOMContentLoaded","load","pageshow","readystatechange"].forEach((t=>{document.addEventListener(t,i,{passive:true,capture:true});window.addEventListener(t,i,{passive:true,capture:true})}));setInterval(i,2e3);const d=()=>{if(s&&!n){n=true;requestAnimationFrame((()=>{document.body.style.visibility="visible"}))}};const l=()=>{if([...document.querySelectorAll("img")].every(o)){s=true;d()}}})();
