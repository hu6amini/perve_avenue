(function(){const e=new Map;let t=0;let s=false;let n=false;const o=e=>e.closest(".slick_carousel")||e.closest("#st-visual-editor")||e.closest(".send")||e.hasAttribute("data-src")||e.classList.contains("lazyload")||e.getAttribute("decoding")==="async"||e.src.startsWith("data:");const a=t=>{if(o(t))return;const s=t.src;if(!s)return;if(e.has(s)){const{width:n,height:o}=e.get(s);r(t,s,n,o);u()}else{const n=new Image;n.onload=()=>{const o=n.naturalWidth;const a=n.naturalHeight;e.set(s,{width:o,height:a});r(t,s,o,a);u()};n.onerror=()=>{r(t,s);u()};n.src=s}};const r=(e,t,s=null,n=null)=>{e.setAttribute("data-src",t);e.removeAttribute("src");e.setAttribute("decoding","async");e.classList.add("lazyload");if(s&&n){e.setAttribute("width",s);e.setAttribute("height",n)}};const i=()=>{if(Date.now()-t<500)return;t=Date.now();const e=Array.from(document.querySelectorAll("img")).filter((e=>!o(e)));if(e.length===0){s=true;maybeRevealPage();return}s=false;e.forEach(a)};const c=new MutationObserver((e=>{for(const{addedNodes:t}of e){for(const e of t){if(e.nodeType!==1)continue;if(e.tagName==="IMG"){a(e)}else{e.querySelectorAll?.("img").forEach(a)}}}}));c.observe(document.documentElement||document.body,{childList:true,subtree:true});const d=()=>{const e=document.getElementById("css_main");if(e){l()}else{setTimeout(d,100)}};const l=()=>{if(s&&!n){n=true;requestAnimationFrame((()=>{document.body.style.visibility="visible"}))}};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",(()=>{d();i()}))}else{d();i()}["ajaxComplete","ajaxSuccess","DOMContentLoaded","load","pageshow","readystatechange"].forEach((e=>{document.addEventListener(e,i,{passive:true,capture:true});window.addEventListener(e,i,{passive:true,capture:true})}));setInterval(i,2e3);const u=()=>{if([...document.querySelectorAll("img")].every(o)){s=true;maybeRevealPage()}}})();
