(function(){const t=new Map;let e=0;let s=false;let n=0;const o=t=>t.closest(".slick_carousel")||t.closest("#st-visual-editor")||t.closest(".send")||t.hasAttribute("data-src")||t.classList.contains("lazyload")||t.getAttribute("decoding")==="async"||t.src.startsWith("data:");const a=e=>{if(o(e))return;const s=e.src;if(!s)return;if(t.has(s)){const{width:n,height:o}=t.get(s);r(e,s,n,o)}else{n++;const o=new Image;o.onload=()=>{const a=o.naturalWidth;const i=o.naturalHeight;t.set(s,{width:a,height:i});r(e,s,a,i);n--;c()};o.onerror=()=>{r(e,s);n--;c()};o.src=s}};const r=(t,e,s=null,n=null)=>{t.setAttribute("data-src",e);t.removeAttribute("src");t.setAttribute("decoding","async");t.classList.add("lazyload");if(s&&n){t.setAttribute("width",s);t.setAttribute("height",n)}};const i=()=>{if(Date.now()-e<500)return;e=Date.now();document.querySelectorAll("img").forEach(a);c()};const c=()=>{if(n===0&&!s){s=true;requestAnimationFrame((()=>{document.body.style.visibility="visible"}))}};const d=new MutationObserver((t=>{for(const{addedNodes:e}of t){for(const t of e){if(t.nodeType!==1)continue;if(t.tagName==="IMG"){a(t)}else{t.querySelectorAll?.("img").forEach(a)}}}}));d.observe(document.documentElement||document.body,{childList:true,subtree:true});if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",i)}else{i()}["ajaxComplete","ajaxSuccess","DOMContentLoaded","load","pageshow","readystatechange"].forEach((t=>{document.addEventListener(t,i,{passive:true,capture:true});window.addEventListener(t,i,{passive:true,capture:true})}));setInterval(i,2e3)})();
